<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36" version="24.8.4">
  <diagram name="Página-1" id="xOaAkj4b48Gnb_sCeI06">
    <mxGraphModel dx="795" dy="606" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-1" value="Requisitos Funcionais&lt;div&gt;- enviar e receber msg&lt;/div&gt;&lt;div&gt;- notificação&amp;nbsp;&lt;/div&gt;&lt;div&gt;- msg multimidia&lt;/div&gt;&lt;div style=&quot;&quot;&gt;- grupos&lt;/div&gt;&lt;div style=&quot;&quot;&gt;- ligação&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="20" y="5" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-2" value="Requisitos Não Funcionais&lt;div&gt;- escalavel&lt;/div&gt;&lt;div&gt;- baixa latencia&lt;/div&gt;&lt;div&gt;- alta disponibilidade&lt;/div&gt;&lt;div&gt;-logs&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="20" y="120" width="170" height="90" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-3" value="Requests&lt;div&gt;500M users, 50msg/dia = 25B msg/dia&lt;/div&gt;&lt;div&gt;enviar + receber + confirmar = 3 req&lt;/div&gt;&lt;div&gt;3x25B = 75B de requests&lt;/div&gt;&lt;div&gt;1% multimidia = 70M&lt;/div&gt;&lt;div&gt;1% ligacao = 70M&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="5" width="230" height="100" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-4" value="Storage&lt;div&gt;1msg = 1kb&lt;/div&gt;&lt;div&gt;25B = 25TB por dia&lt;/div&gt;&lt;div&gt;9PB por ano&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="120" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-5" value="&lt;div style=&quot;box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;&quot;&gt;user&lt;/div&gt;&lt;table style=&quot;width:100%;font-size:1em;&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;uniqueId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br&gt;&lt;/td&gt;&lt;td&gt;number&lt;br&gt;name&lt;br&gt;profilePictureUrl&lt;br&gt;lastSeen&lt;br&gt;statusMsg&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="20" y="230" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-6" value="&lt;div style=&quot;box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;&quot;&gt;message&lt;/div&gt;&lt;table style=&quot;width:100%;font-size:1em;&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;uniqueId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK1&lt;br&gt;FK2&lt;br&gt;FK3&lt;/td&gt;&lt;td&gt;receiverid&lt;br&gt;senderId&lt;br&gt;groupId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;text&lt;br&gt;mediaUrl&lt;br&gt;timestamp&lt;br&gt;status (enum)&lt;br&gt;readAt&lt;br&gt;deliveredAt&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="400" y="230" width="200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-7" value="&lt;div style=&quot;box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;&quot;&gt;group&lt;/div&gt;&lt;table style=&quot;width:100%;font-size:1em;&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PK&lt;br&gt;FK1&lt;/td&gt;&lt;td&gt;uniqueId&lt;br&gt;createdBy&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br&gt;&lt;/td&gt;&lt;td&gt;name&lt;br&gt;description&lt;br&gt;photoUrl&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="225" y="230" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-8" value="&lt;div style=&quot;box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;&quot;&gt;group users&lt;/div&gt;&lt;table style=&quot;width:100%;font-size:1em;&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;uniqueId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK1&lt;br&gt;FK2&lt;/td&gt;&lt;td&gt;groupId&lt;br&gt;userId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;role&lt;br&gt;addedAt&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="225" y="390" width="145" height="120" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-9" value="&lt;div style=&quot;box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;&quot;&gt;call&lt;/div&gt;&lt;table style=&quot;width:100%;font-size:1em;&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PK&lt;/td&gt;&lt;td&gt;uniqueId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;FK1&lt;br&gt;FK2&lt;/td&gt;&lt;td&gt;callerId&lt;br&gt;receiverId&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;type (voice, video)&lt;br&gt;status&lt;br&gt;startedAt&lt;br&gt;endedAt&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="20" y="390" width="180" height="130" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-10" target="wXrM8oS1fU6yHg3NIPrC-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-10" value="user" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="630" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-11" target="wXrM8oS1fU6yHg3NIPrC-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-11" value="load&lt;div&gt;balancer&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="630" width="80" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-12" target="wXrM8oS1fU6yHg3NIPrC-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-12" target="wXrM8oS1fU6yHg3NIPrC-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-12" target="wXrM8oS1fU6yHg3NIPrC-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-12" value="application" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="210" y="645" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-15" target="wXrM8oS1fU6yHg3NIPrC-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-15" target="wXrM8oS1fU6yHg3NIPrC-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-15" value="websocket service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="610" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-16" target="wXrM8oS1fU6yHg3NIPrC-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-16" target="wXrM8oS1fU6yHg3NIPrC-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.7;entryDx=0;entryDy=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-16" target="wXrM8oS1fU6yHg3NIPrC-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-16" value="message service" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="341" y="687" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="wXrM8oS1fU6yHg3NIPrC-15" target="wXrM8oS1fU6yHg3NIPrC-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-21" value="NoSQL" style="shape=datastore;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="421" y="780" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-30" value="grafana" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="195" y="775" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-35" value="notification queue" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="610" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-37" value="message queue" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="670" width="120" height="35" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-39" value="redis" style="shape=datastore;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="730" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wXrM8oS1fU6yHg3NIPrC-43" value="redis: last seen,&lt;div&gt;recent msgs,&lt;/div&gt;&lt;div&gt;session,&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;lock&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="610" y="755" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9bwKKUPzYdFVsSCPyusj-1" value="call and msg can be the same" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="409" y="410" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9bwKKUPzYdFVsSCPyusj-2" value="when u create a msg, this goes to websocket,&amp;nbsp;&lt;div&gt;it knows if should notify. Change place&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="455" y="563" width="270" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
